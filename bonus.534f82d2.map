{"version":3,"sources":["exercises/bonus/bonus.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["bonusComponent","resultList","document","querySelector","modalWrapper","init","searchBox","backButton","addEventListener","history","back","searchQuery","toggleModal","event","query","target","value","querySelectorAll","forEach","element","removeEventListener","openImage","innerHTML","fetch","then","response","ok","json","Error","statusText","collection","items","map","item","imageSrc","links","href","description","data","description_508","length","zeroResults","addImage","catch","err","errorRequest","error","classList","toggle","modalImage","src","alt","bundleURL","getBundleURLCached","getBundleURL","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","i","module"],"mappings":"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","file":"bonus.534f82d2.map","sourceRoot":"..","sourcesContent":["import './bonus.scss';\n\nconst bonusComponent = () => {\n  // Declaration of variables used in different methods.\n  const resultList = document.querySelector('[data-bonusresults]');\n  const modalWrapper = document.querySelector('[data-bonusModal]');\n\n  const init = () => {\n    const searchBox = document.querySelector('[data-bonusInput]');\n    const backButton = document.querySelector('[data-bonusBack]');\n\n      backButton.addEventListener('click', () => history.back(-1));\n    searchBox.addEventListener('change', searchQuery);\n    modalWrapper.addEventListener('click', toggleModal);\n  }\n\n  const searchQuery = (event) => {\n    const query = event.target.value;\n\n    // remove Event Listeners before removing DOM elements to avoid possible memory leaks.\n    resultList.querySelectorAll('[data-bonusImageItem]').forEach( element => element.removeEventListener('click', openImage));\n    resultList.innerHTML = '';\n    fetch(`https://images-api.nasa.gov/search?q=${query}&media_type=image`)\n    .then(response => {\n      // If the request is successful, convert it to JSON and return it\n      if (response.ok) {\n        return response.json();\n      }\n      // If the request fails throw an error which will be caught below\n      throw Error(response.statusText);\n    })\n    // When the JSON conversion is done and returned we process it here\n    .then(json => {\n      const collection = json.collection.items.map(item => {\n        return {\n          imageSrc: item.links[0].href,\n          description: item.data[0].description_508,\n        }\n      });\n\n      if (!collection.length) {\n        zeroResults(query);\n        return;\n      }\n\n      collection.forEach(addImage);\n      resultList.querySelectorAll('[data-bonusImageItem]').forEach( element => {\n        element.addEventListener('click', openImage);\n      });\n\n    })\n    .catch(err => errorRequest(err));\n  }\n\n  // Error and Zero Results handling;\n  const errorRequest = error => resultList.innerHTML += `<p class=\"Bonus-zeroResult\">Oops, the following error has occurred: <span class=\"Bonus-errorText\">${error}</span></p>`;\n  const zeroResults = query => resultList.innerHTML += `<p class=\"Bonus-zeroResult\">We haven't found any result with the keyword <span class=\"Bonus-quotedQuery\">${query}</span></em>`;\n  // Adding image node with the collection item information\n  const addImage = item => resultList.innerHTML += `<img data-bonusImageItem class=\"Bonus-imageItem\" src=\"${item.imageSrc}\" alt=\"${item.description}\"/>`;\n  // Toggle active class to show and hide the modal\n  const toggleModal = () => modalWrapper.classList.toggle('Bonus-modal--active');\n\n  // Parameter deconstruction with assignment into a variable.\n  const openImage = ({ target: element }) => {\n    const modalImage = document.querySelector('[data-bonusmodalimage]');\n\n    modalImage.src = element.src;\n    modalImage.alt = element.alt;\n    toggleModal();\n  }\n\n  init();\n};\n\n// We initialise the Accordion logic once we have the HTML in place.\ndocument.addEventListener(`DOMContentLoaded`, () => bonusComponent());","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}